<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çº½çº¦è¯¾æ•™å¸ˆè¯¾è¡¨</title>
    <meta name="description" content="çº½çº¦è¯¾æ•™å¸ˆè¯¾è¡¨å®æ—¶æ—¥ç¨‹æ€»è§ˆ">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Lora:wght@400;500;600&display=swap"
        rel="stylesheet">
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        :root {
            /* Anthropic palette */
            --bg: #faf9f5;
            --surface: #f0efe8;
            --surface2: #e8e6dc;
            --border: #dcd9cf;
            --text: #141413;
            --text2: #5a584f;
            --text3: #b0aea5;
            --radius: 10px;
            --radius-sm: 7px;

            /* Teacher accents â€” earthy, muted */
            --miya: #d97757;
            --rita: #6a9bcc;
            --yueyue: #788c5d;
            --dage: #8b6f5c;

            /* Fonts */
            --font-heading: 'Poppins', system-ui, -apple-system, sans-serif;
            --font-body: 'Lora', Georgia, serif;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg);
            color: var(--text);
            min-height: 100vh
        }

        h1 {
            font-family: var(--font-heading);
            font-size: 1.35rem;
            font-weight: 700;
            letter-spacing: -0.01em
        }

        /* Layout */
        .shell {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden
        }

        .topbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 28px;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
            background: var(--bg);
            position: sticky;
            top: 0;
            z-index: 10
        }

        .topbar-left {
            display: flex;
            align-items: center;
            gap: 14px
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 12px
        }

        .sync-badge {
            font-family: var(--font-heading);
            font-size: 0.7rem;
            color: var(--text3);
            background: var(--surface2);
            padding: 4px 12px;
            border-radius: 20px;
            white-space: nowrap;
            letter-spacing: 0.01em
        }

        .sync-badge::before {
            content: '';
            display: inline-block;
            width: 6px;
            height: 6px;
            background: #788c5d;
            border-radius: 50%;
            margin-right: 7px;
            animation: pulse 2.5s ease-in-out infinite
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1
            }

            50% {
                opacity: .35
            }
        }

        /* Tabs â€” Anthropic pill nav */
        .tabs {
            display: flex;
            gap: 6px;
            flex-wrap: wrap
        }

        .tab {
            padding: 6px 16px;
            border-radius: 20px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text2);
            font-size: 0.78rem;
            font-weight: 500;
            cursor: pointer;
            transition: all .25s ease;
            font-family: var(--font-heading);
            letter-spacing: 0.01em
        }

        .tab:hover {
            background: var(--surface2);
            color: var(--text);
            border-color: var(--text3)
        }

        .tab.active {
            background: var(--text);
            color: var(--bg);
            border-color: var(--text)
        }

        /* Main area */
        .main {
            display: flex;
            flex: 1;
            overflow: hidden
        }

        .calendar-area {
            flex: 1;
            overflow-y: auto;
            overflow-x: auto;
            padding: 0
        }

        .sidebar {
            width: 280px;
            flex-shrink: 0;
            border-left: 1px solid var(--border);
            overflow-y: auto;
            padding: 22px;
            background: var(--surface)
        }

        /* Week header */
        .week-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 28px;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0
        }

        .week-label {
            font-family: var(--font-heading);
            font-size: 0.88rem;
            font-weight: 600;
            color: var(--text2)
        }

        /* Grid */
        .grid-wrap {
            display: flex;
            position: relative;
            min-width: 700px
        }

        .time-gutter {
            width: 58px;
            flex-shrink: 0;
            position: relative;
            border-right: 1px solid var(--border)
        }

        .time-label {
            position: absolute;
            right: 12px;
            font-family: var(--font-heading);
            font-size: 0.68rem;
            color: var(--text3);
            transform: translateY(-50%);
            font-variant-numeric: tabular-nums
        }

        .days-container {
            display: flex;
            flex: 1
        }

        .day-col {
            flex: 1;
            min-width: 0;
            border-right: 1px solid var(--border);
            position: relative
        }

        .day-col:last-child {
            border-right: none
        }

        .day-header {
            text-align: center;
            padding: 10px 4px 8px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            background: var(--bg);
            z-index: 2
        }

        .weekday {
            display: block;
            font-family: var(--font-heading);
            font-size: 0.7rem;
            color: var(--text3);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.06em
        }

        .date-num {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-family: var(--font-heading);
            font-size: 0.84rem;
            font-weight: 600;
            color: var(--text2);
            margin-top: 2px
        }

        .today-col .weekday {
            color: var(--text)
        }

        .today-col .date-num {
            color: #fff;
            background: var(--miya);
            padding: 2px 10px;
            border-radius: 20px
        }

        .today-dot {
            display: none
        }

        .day-body {
            position: relative;
        }

        /* Hour gridlines */
        .day-body::before {
            content: '';
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(to bottom, transparent, transparent 59px, var(--border) 59px, var(--border) 60px);
            pointer-events: none;
            z-index: 0;
        }

        /* Event block */
        .ev {
            position: absolute;
            border-radius: var(--radius-sm);
            padding: 3px 7px;
            overflow: hidden;
            cursor: default;
            z-index: 1;
            display: flex;
            flex-direction: column;
            gap: 1px;
            transition: opacity .3s ease, box-shadow .3s ease, left .35s ease, width .35s ease;
        }

        /* Hover-expand: in-place full-width pop */
        .ev:hover {
            z-index: 20;
            width: calc(100% - 4px) !important;
            left: calc(0% + 2px) !important;
            box-shadow: 0 4px 20px rgba(20, 20, 19, 0.15);
            overflow: visible;
        }

        .ev:hover .ev-title {
            -webkit-line-clamp: unset;
            overflow: visible;
        }

        .ev-time {
            font-family: var(--font-heading);
            font-size: 0.64rem;
            font-weight: 600;
            opacity: 0.65;
            white-space: nowrap
        }

        .ev-title {
            font-size: 0.72rem;
            font-weight: 500;
            line-height: 1.35;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden
        }

        /* Formatted title spans */
        .ev-teacher {
            font-weight: 600;
            opacity: 0.7;
            font-size: 0.64rem
        }

        .ev-student {
            font-weight: 600
        }

        .ev-meta {
            opacity: 0.7;
            font-size: 0.65rem
        }

        .ev-sep {
            opacity: 0.35;
            margin: 0 2px
        }

        .ev.hidden {
            opacity: 0.06;
            pointer-events: none
        }

        /* Day column hidden */
        .day-col.col-hidden {
            display: none
        }

        /* Tomorrow sidebar divider */
        .sidebar-divider {
            height: 1px;
            background: var(--border);
            margin: 16px 0;
        }

        /* All-day row */
        .allday-row {
            display: flex;
            min-height: 28px;
            border-bottom: 1px solid var(--border)
        }

        .allday-gutter {
            width: 58px;
            flex-shrink: 0;
            border-right: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-family: var(--font-heading);
            font-size: 0.65rem;
            color: var(--text3)
        }

        .allday-cells {
            display: flex;
            flex: 1
        }

        .allday-cell {
            flex: 1;
            min-width: 0;
            border-right: 1px solid var(--border);
            padding: 4px;
            display: flex;
            flex-wrap: wrap;
            gap: 3px;
            align-items: center
        }

        .allday-cell:last-child {
            border-right: none
        }

        .allday-pill {
            font-family: var(--font-heading);
            font-size: 0.65rem;
            padding: 2px 8px;
            border-radius: 12px;
            white-space: nowrap;
            font-weight: 500
        }

        .allday-pill.hidden {
            opacity: 0.06
        }

        /* Sidebar */
        .sidebar-title-main {
            font-family: var(--font-heading);
            font-size: 0.95rem;
            font-weight: 700;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 8px
        }

        .sidebar-title-main::before {
            content: 'ğŸ“‹'
        }

        .sidebar-teacher {
            margin-bottom: 18px
        }

        .sidebar-teacher-name {
            font-family: var(--font-heading);
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 7px;
            display: flex;
            align-items: center;
            gap: 7px
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0
        }

        .sidebar-ev {
            display: flex;
            flex-direction: column;
            padding: 9px 12px;
            background: var(--surface2);
            border-radius: var(--radius-sm);
            margin-bottom: 5px;
            transition: opacity .3s ease
        }

        .sidebar-ev.hidden {
            opacity: 0.06
        }

        .sidebar-time {
            font-family: var(--font-heading);
            font-size: 0.68rem;
            color: var(--text3);
            font-variant-numeric: tabular-nums;
            font-weight: 500
        }

        .sidebar-title {
            font-size: 0.78rem;
            font-weight: 500;
            margin-top: 2px
        }

        .sidebar-empty {
            color: var(--text3);
            font-size: 0.85rem;
            text-align: center;
            padding: 40px 0
        }

        /* Now line â€” terracotta */
        .now-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--miya);
            z-index: 3;
            pointer-events: none
        }

        .now-line::before {
            content: '';
            position: absolute;
            left: -4px;
            top: -3px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--miya)
        }

        /* Mobile */
        @media(max-width:860px) {
            .sidebar {
                display: none
            }

            .topbar {
                padding: 12px 16px;
                flex-wrap: wrap;
                gap: 8px
            }

            .tabs {
                order: 3;
                width: 100%
            }

            .grid-wrap {
                min-width: 580px
            }
        }

        @media(max-width:600px) {
            .grid-wrap {
                min-width: 480px
            }

            .time-gutter {
                width: 42px
            }

            .time-label {
                font-size: 0.6rem;
                right: 6px
            }

            .ev-title {
                font-size: 0.65rem
            }

            .day-header {
                padding: 6px 2px 4px
            }
        }
    </style>
</head>

<body>
    <div class="shell">
        <div class="topbar">
            <div class="topbar-left">
                <h1>çº½çº¦è¯¾æ•™å¸ˆè¯¾è¡¨</h1>
                <div class="tabs" id="tabs"><button class="tab active" data-filter="all">å…¨éƒ¨</button><button class="tab"
                        data-filter="Miya">Miya</button><button class="tab" data-filter="Rita">Rita</button><button
                        class="tab" data-filter="æœˆæœˆ">æœˆæœˆ</button><button class="tab" data-filter="è¾¾å“¥">è¾¾å“¥</button></div>
            </div>
            <div class="topbar-right">
                <span class="sync-badge">åŒæ­¥äº 2026-02-27 12:00:44</span>
            </div>
        </div>

        <div class="week-header">
            <span class="week-label">02æœˆ23æ—¥ â€“ 03æœˆ01æ—¥</span>
        </div>

        <div class="main">
            <div class="calendar-area">
                <!-- All-day row -->
                <div class="allday-row">
                    <div class="allday-gutter">å…¨å¤©</div>
                    <div class="allday-cells">
                        <div class="allday-cell"></div>
                        <div class="allday-cell"></div>
                        <div class="allday-cell"></div>
                        <div class="allday-cell"></div>
                        <div class="allday-cell"></div>
                        <div class="allday-cell"></div>
                        <div class="allday-cell"></div>
                    </div>
                </div>

                <!-- Time grid -->
                <div class="grid-wrap">
                    <div class="time-gutter" style="height:840px;">
                        <div class="time-label" style="top:0px;">08:00</div>
                        <div class="time-label" style="top:60px;">09:00</div>
                        <div class="time-label" style="top:120px;">10:00</div>
                        <div class="time-label" style="top:180px;">11:00</div>
                        <div class="time-label" style="top:240px;">12:00</div>
                        <div class="time-label" style="top:300px;">13:00</div>
                        <div class="time-label" style="top:360px;">14:00</div>
                        <div class="time-label" style="top:420px;">15:00</div>
                        <div class="time-label" style="top:480px;">16:00</div>
                        <div class="time-label" style="top:540px;">17:00</div>
                        <div class="time-label" style="top:600px;">18:00</div>
                        <div class="time-label" style="top:660px;">19:00</div>
                        <div class="time-label" style="top:720px;">20:00</div>
                        <div class="time-label" style="top:780px;">21:00</div>
                    </div>
                    <div class="days-container">

                        <div class="day-col" data-date="2026-02-23">
                            <div class="day-header">
                                <span class="weekday">å‘¨ä¸€</span>
                                <span class="date-num">2/23</span>
                            </div>
                            <div class="day-body" style="height:840px;">
                                <div class="ev" style="top:0.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miyaä¼‘æ¯â™¨ï¸  08:00â€“09:00">
                                    <span class="ev-time">08:00â€“09:00</span>
                                    <span class="ev-title">miyaä¼‘æ¯â™¨ï¸</span>
                                </div>
                                <div class="ev" style="top:150.0px;height:90.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita å°æ¥·é›…æ€é˜…è¯»æ­£è¯¾  10:30â€“12:00">
                                    <span class="ev-time">10:30â€“12:00</span>
                                    <span class="ev-title">Rita å°æ¥·é›…æ€é˜…è¯»æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:360.0px;height:90.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita çš“å®‡æ‰˜ç¦å£è¯­æ­£è¯¾  14:00â€“15:30">
                                    <span class="ev-time">14:00â€“15:30</span>
                                    <span class="ev-title">Rita çš“å®‡æ‰˜ç¦å£è¯­æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:480.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(139,111,92,0.12);border-left:3px solid #8b6f5c;
            " data-teacher="è¾¾å“¥" title="è¾¾å“¥ å°æ¥·é›…æ€å£è¯­æ­£è¯¾  16:00â€“17:00">
                                    <span class="ev-time">16:00â€“17:00</span>
                                    <span class="ev-title">è¾¾å“¥ å°æ¥·é›…æ€å£è¯­æ­£è¯¾</span>
                                </div>
                            </div>
                        </div>
                        <div class="day-col" data-date="2026-02-24">
                            <div class="day-header">
                                <span class="weekday">å‘¨äºŒ</span>
                                <span class="date-num">2/24</span>
                            </div>
                            <div class="day-body" style="height:840px;">
                                <div class="ev" style="top:120.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya å°æ¥·é›…æ€å†™ä½œ  10:00â€“11:00">
                                    <span class="ev-time">10:00â€“11:00</span>
                                    <span class="ev-title">miya å°æ¥·é›…æ€å†™ä½œ</span>
                                </div>
                                <div class="ev" style="top:360.0px;height:90.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya çš“å®‡æ‰˜ç¦å†™ä½œæ­£è¯¾  14:00â€“15:30">
                                    <span class="ev-time">14:00â€“15:30</span>
                                    <span class="ev-title">miya çš“å®‡æ‰˜ç¦å†™ä½œæ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:480.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾  16:00â€“17:00">
                                    <span class="ev-time">16:00â€“17:00</span>
                                    <span class="ev-title">miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾</span>
                                </div>
                            </div>
                        </div>
                        <div class="day-col" data-date="2026-02-25">
                            <div class="day-header">
                                <span class="weekday">å‘¨ä¸‰</span>
                                <span class="date-num">2/25</span>
                            </div>
                            <div class="day-body" style="height:840px;">
                                <div class="ev" style="top:0.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miyaä¼‘æ¯â™¨ï¸  08:00â€“09:00">
                                    <span class="ev-time">08:00â€“09:00</span>
                                    <span class="ev-title">miyaä¼‘æ¯â™¨ï¸</span>
                                </div>
                                <div class="ev" style="top:120.0px;height:90.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(120,140,93,0.12);border-left:3px solid #788c5d;
            " data-teacher="æœˆæœˆ" title="ğŸˆ·ï¸ è´ºè´ºé›…æ€å¬åŠ›æ­£è¯¾  10:00â€“11:30">
                                    <span class="ev-time">10:00â€“11:30</span>
                                    <span class="ev-title">ğŸˆ·ï¸ è´ºè´ºé›…æ€å¬åŠ›æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:360.0px;height:90.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita çš“å®‡æ‰˜ç¦å£è¯­æ­£è¯¾  14:00â€“15:30">
                                    <span class="ev-time">14:00â€“15:30</span>
                                    <span class="ev-title">Rita çš“å®‡æ‰˜ç¦å£è¯­æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:480.0px;height:90.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita è´ºè´ºé›…æ€é˜…è¯»æ­£è¯¾  16:00â€“17:30">
                                    <span class="ev-time">16:00â€“17:30</span>
                                    <span class="ev-title">Rita è´ºè´ºé›…æ€é˜…è¯»æ­£è¯¾</span>
                                </div>
                            </div>
                        </div>
                        <div class="day-col" data-date="2026-02-26">
                            <div class="day-header">
                                <span class="weekday">å‘¨å››</span>
                                <span class="date-num">2/26</span>
                            </div>
                            <div class="day-body" style="height:840px;">
                                <div class="ev" style="top:120.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita å°æ¥·é›…æ€é˜…è¯»æ­£è¯¾  10:00â€“11:00">
                                    <span class="ev-time">10:00â€“11:00</span>
                                    <span class="ev-title">Rita å°æ¥·é›…æ€é˜…è¯»æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:180.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya çš®çš®å†™ä½œæ­£è¯¾  11:00â€“12:00">
                                    <span class="ev-time">11:00â€“12:00</span>
                                    <span class="ev-title">miya çš®çš®å†™ä½œæ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:360.0px;height:90.0px;left:calc(0.0% + 2px);width:calc(50.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya çš“å®‡æ‰˜ç¦å†™ä½œæ­£è¯¾  14:00â€“15:30">
                                    <span class="ev-time">14:00â€“15:30</span>
                                    <span class="ev-title">miya çš“å®‡æ‰˜ç¦å†™ä½œæ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:420.0px;height:60.0px;left:calc(50.0% + 2px);width:calc(50.0% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita çš®çš®é›…æ€é˜…è¯»æ­£è¯¾  15:00â€“16:00">
                                    <span class="ev-time">15:00â€“16:00</span>
                                    <span class="ev-title">Rita çš®çš®é›…æ€é˜…è¯»æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:480.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾  16:00â€“17:00">
                                    <span class="ev-time">16:00â€“17:00</span>
                                    <span class="ev-title">miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾</span>
                                </div>
                            </div>
                        </div>
                        <div class="day-col today-col" data-date="2026-02-27">
                            <div class="day-header">
                                <span class="weekday">å‘¨äº”</span>
                                <span class="date-num"><span class="today-dot"></span>2/27</span>
                            </div>
                            <div class="day-body" style="height:840px;">
                                <div class="ev" style="top:120.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita å°æ¥·é›…æ€é˜…è¯»  10:00â€“11:00">
                                    <span class="ev-time">10:00â€“11:00</span>
                                    <span class="ev-title">Rita å°æ¥·é›…æ€é˜…è¯»</span>
                                </div>
                                <div class="ev" style="top:150.0px;height:90.0px;left:calc(33.333333333333336% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya è´ºè´ºé›…æ€å†™ä½œ  10:30â€“12:00">
                                    <span class="ev-time">10:30â€“12:00</span>
                                    <span class="ev-title">miya è´ºè´ºé›…æ€å†™ä½œ</span>
                                </div>
                                <div class="ev" style="top:180.0px;height:60.0px;left:calc(66.66666666666667% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita çš®çš®é›…æ€é˜…è¯»æ­£è¯¾  11:00â€“12:00">
                                    <span class="ev-time">11:00â€“12:00</span>
                                    <span class="ev-title">Rita çš®çš®é›…æ€é˜…è¯»æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:420.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾  15:00â€“16:00">
                                    <span class="ev-time">15:00â€“16:00</span>
                                    <span class="ev-title">miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:420.0px;height:120.0px;left:calc(33.333333333333336% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(106,155,204,0.12);border-left:3px solid #6a9bcc;
            " data-teacher="Rita" title="Rita è´ºè´ºé›…æ€é˜…è¯»æ­£è¯¾  15:00â€“17:00">
                                    <span class="ev-time">15:00â€“17:00</span>
                                    <span class="ev-title">Rita è´ºè´ºé›…æ€é˜…è¯»æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:510.0px;height:90.0px;left:calc(66.66666666666667% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya çš®çš®é›…æ€å†™ä½œæ­£è¯¾  16:30â€“18:00">
                                    <span class="ev-time">16:30â€“18:00</span>
                                    <span class="ev-title">miya çš®çš®é›…æ€å†™ä½œæ­£è¯¾</span>
                                </div>
                            </div>
                        </div>
                        <div class="day-col" data-date="2026-02-28">
                            <div class="day-header">
                                <span class="weekday">å‘¨å…­</span>
                                <span class="date-num">2/28</span>
                            </div>
                            <div class="day-body" style="height:840px;">
                                <div class="ev" style="top:120.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(25.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾  10:00â€“11:00">
                                    <span class="ev-time">10:00â€“11:00</span>
                                    <span class="ev-title">miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:120.0px;height:60.0px;left:calc(25.0% + 2px);width:calc(25.0% - 4px);
            background:rgba(139,111,92,0.12);border-left:3px solid #8b6f5c;
            " data-teacher="è¾¾å“¥" title="è¾¾å“¥ è´ºè´ºé›…æ€å£è¯­æ­£è¯¾  10:00â€“11:00">
                                    <span class="ev-time">10:00â€“11:00</span>
                                    <span class="ev-title">è¾¾å“¥ è´ºè´ºé›…æ€å£è¯­æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:120.0px;height:90.0px;left:calc(50.0% + 2px);width:calc(25.0% - 4px);
            background:rgba(120,140,93,0.12);border-left:3px solid #788c5d;
            " data-teacher="æœˆæœˆ" title="ğŸˆ·ï¸ å¸Œæºé›…æ€å¬åŠ›æ­£è¯¾  10:00â€“11:30">
                                    <span class="ev-time">10:00â€“11:30</span>
                                    <span class="ev-title">ğŸˆ·ï¸ å¸Œæºé›…æ€å¬åŠ›æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:180.0px;height:60.0px;left:calc(75.0% + 2px);width:calc(25.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya è´ºè´ºé›…æ€å†™ä½œæ­£è¯¾  11:00â€“12:00">
                                    <span class="ev-time">11:00â€“12:00</span>
                                    <span class="ev-title">miya è´ºè´ºé›…æ€å†™ä½œæ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:360.0px;height:90.0px;left:calc(0.0% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miya æ€é¢–é›…æ€å†™ä½œæ­£è¯¾  14:00â€“15:30">
                                    <span class="ev-time">14:00â€“15:30</span>
                                    <span class="ev-title">miya æ€é¢–é›…æ€å†™ä½œæ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:360.0px;height:90.0px;left:calc(33.333333333333336% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(120,140,93,0.12);border-left:3px solid #788c5d;
            " data-teacher="æœˆæœˆ" title="ğŸˆ·ï¸ è´ºè´ºé›…æ€å¬åŠ›æ­£è¯¾  14:00â€“15:30">
                                    <span class="ev-time">14:00â€“15:30</span>
                                    <span class="ev-title">ğŸˆ·ï¸ è´ºè´ºé›…æ€å¬åŠ›æ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:390.0px;height:60.0px;left:calc(66.66666666666667% + 2px);width:calc(33.333333333333336% - 4px);
            background:rgba(139,111,92,0.12);border-left:3px solid #8b6f5c;
            " data-teacher="è¾¾å“¥" title="è¾¾å“¥ çš®çš®é›…æ€å£è¯­æ¨¡è€ƒæ­£è¯¾  14:30â€“15:30">
                                    <span class="ev-time">14:30â€“15:30</span>
                                    <span class="ev-title">è¾¾å“¥ çš®çš®é›…æ€å£è¯­æ¨¡è€ƒæ­£è¯¾</span>
                                </div>
                                <div class="ev" style="top:480.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(139,111,92,0.12);border-left:3px solid #8b6f5c;
            " data-teacher="è¾¾å“¥" title="è¾¾å“¥ å¸Œæºé›…æ€å£è¯­æ­£è¯¾  16:00â€“17:00">
                                    <span class="ev-time">16:00â€“17:00</span>
                                    <span class="ev-title">è¾¾å“¥ å¸Œæºé›…æ€å£è¯­æ­£è¯¾</span>
                                </div>
                            </div>
                        </div>
                        <div class="day-col" data-date="2026-03-01">
                            <div class="day-header">
                                <span class="weekday">å‘¨æ—¥</span>
                                <span class="date-num">3/1</span>
                            </div>
                            <div class="day-body" style="height:840px;">
                                <div class="ev" style="top:0.0px;height:60.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(217,119,87,0.12);border-left:3px solid #d97757;
            " data-teacher="Miya" title="miyaä¼‘æ¯â™¨ï¸  08:00â€“09:00">
                                    <span class="ev-time">08:00â€“09:00</span>
                                    <span class="ev-title">miyaä¼‘æ¯â™¨ï¸</span>
                                </div>
                                <div class="ev" style="top:360.0px;height:120.0px;left:calc(0.0% + 2px);width:calc(100.0% - 4px);
            background:rgba(139,111,92,0.12);border-left:3px solid #8b6f5c;
            " data-teacher="è¾¾å“¥" title="çš“å®‡æ–°æ‰˜ç¦æ¨¡è€ƒ  14:00â€“16:00">
                                    <span class="ev-time">14:00â€“16:00</span>
                                    <span class="ev-title">çš“å®‡æ–°æ‰˜ç¦æ¨¡è€ƒ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="sidebar-title-main">ä»Šæ—¥è¯¾ç¨‹æ€»è§ˆ</div>
                <div class="sidebar-teacher">
                    <div class="sidebar-teacher-name" style="color:#d97757"><span class="dot"
                            style="background:#d97757"></span>Miya (3èŠ‚)</div>
                    <div class="sidebar-ev"><span class="sidebar-time">10:30â€“12:00</span><span
                            class="sidebar-title">miya è´ºè´ºé›…æ€å†™ä½œ</span></div>
                    <div class="sidebar-ev"><span class="sidebar-time">15:00â€“16:00</span><span
                            class="sidebar-title">miya å°æ¥·é›…æ€å†™ä½œæ­£è¯¾</span></div>
                    <div class="sidebar-ev"><span class="sidebar-time">16:30â€“18:00</span><span
                            class="sidebar-title">miya çš®çš®é›…æ€å†™ä½œæ­£è¯¾</span></div>
                </div>
                <div class="sidebar-teacher">
                    <div class="sidebar-teacher-name" style="color:#6a9bcc"><span class="dot"
                            style="background:#6a9bcc"></span>Rita (3èŠ‚)</div>
                    <div class="sidebar-ev"><span class="sidebar-time">10:00â€“11:00</span><span
                            class="sidebar-title">Rita å°æ¥·é›…æ€é˜…è¯»</span></div>
                    <div class="sidebar-ev"><span class="sidebar-time">11:00â€“12:00</span><span
                            class="sidebar-title">Rita çš®çš®é›…æ€é˜…è¯»æ­£è¯¾</span></div>
                    <div class="sidebar-ev"><span class="sidebar-time">15:00â€“17:00</span><span
                            class="sidebar-title">Rita è´ºè´ºé›…æ€é˜…è¯»æ­£è¯¾</span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        (function () {
            // â”€â”€ Known teachers â”€â”€
            const TEACHERS = ['miya', 'Miya', 'Rita', 'rita', 'æœˆæœˆ', 'è¾¾å“¥'];
            const TEACHER_PREFIXES = ['miya', 'Rita', 'rita', 'è¾¾å“¥', 'ğŸˆ·ï¸'];
            const TESTS = ['æ–°æ‰˜ç¦', 'æ‰˜ç¦', 'é›…æ€'];
            const SKILLS = ['é˜…è¯»', 'å†™ä½œ', 'å£è¯­', 'å¬åŠ›'];
            const TYPES = ['æ¨¡è€ƒæ­£è¯¾', 'æ¨¡è€ƒ', 'æ­£è¯¾'];
            const TEACHER_COLORS = { Miya: '#d97757', Rita: '#6a9bcc', 'æœˆæœˆ': '#788c5d', 'è¾¾å“¥': '#8b6f5c' };
            const START_HOUR = 8;

            // â”€â”€ Today/Tomorrow helpers â”€â”€
            const now = new Date();
            const todayStr = now.getFullYear() + '-' + String(now.getMonth() + 1).padStart(2, '0') + '-' + String(now.getDate()).padStart(2, '0');
            const tomorrow = new Date(now); tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.getFullYear() + '-' + String(tomorrow.getMonth() + 1).padStart(2, '0') + '-' + String(tomorrow.getDate()).padStart(2, '0');
            const twoDaysAgo = new Date(now); twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);
            const cutoffStr = twoDaysAgo.getFullYear() + '-' + String(twoDaysAgo.getMonth() + 1).padStart(2, '0') + '-' + String(twoDaysAgo.getDate()).padStart(2, '0');

            // â”€â”€ 1. Hide day columns older than 2 days ago â”€â”€
            const allCols = document.querySelectorAll('.day-col');
            let visibleDates = [];
            allCols.forEach(col => {
                const d = col.dataset.date;
                if (d < cutoffStr) {
                    col.classList.add('col-hidden');
                } else {
                    visibleDates.push(d);
                }
            });
            // Update week header label
            if (visibleDates.length) {
                const first = visibleDates[0], last = visibleDates[visibleDates.length - 1];
                const fmt = d => { const [, m, dd] = d.split('-'); return parseInt(m) + 'æœˆ' + parseInt(dd) + 'æ—¥'; };
                const weekLabel = document.querySelector('.week-label');
                if (weekLabel) weekLabel.textContent = fmt(first) + ' â€“ ' + fmt(last);
            }
            // Also hide corresponding allday cells
            const alldayCells = document.querySelectorAll('.allday-cell');
            let cellIdx = 0;
            allCols.forEach(col => {
                if (alldayCells[cellIdx]) {
                    if (col.classList.contains('col-hidden')) alldayCells[cellIdx].style.display = 'none';
                }
                cellIdx++;
            });

            // â”€â”€ 2. Trim empty hour rows from the bottom â”€â”€
            let latestEndPx = 0;
            document.querySelectorAll('.ev').forEach(ev => {
                const top = parseFloat(ev.style.top) || 0;
                const height = parseFloat(ev.style.height) || 0;
                const end = top + height;
                if (end > latestEndPx) latestEndPx = end;
            });
            // Add 1 hour buffer, round up to next hour boundary
            const latestEndHour = Math.ceil(latestEndPx / 60) + START_HOUR + 1;
            const gridEndHour = Math.min(22, Math.max(latestEndHour, START_HOUR + 4)); // at least 4 hours shown
            const totalHours = gridEndHour - START_HOUR;
            const gridHeight = totalHours * 60;

            // Adjust time gutter â€” remove labels past gridEndHour
            const gutter = document.querySelector('.time-gutter');
            if (gutter) {
                gutter.style.height = gridHeight + 'px';
                Array.from(gutter.querySelectorAll('.time-label')).forEach(lbl => {
                    const hr = parseInt(lbl.textContent);
                    if (hr >= gridEndHour) lbl.style.display = 'none';
                });
            }
            // Adjust all day-body heights
            document.querySelectorAll('.day-body').forEach(db => db.style.height = gridHeight + 'px');

            // â”€â”€ Parse title helpers â”€â”€
            function parseTitle(raw, teacherAttr) {
                if (!raw) return { special: raw || '' };
                let s = raw.trim();
                if (s.includes('ä¼‘æ¯')) return { special: s.replace(/^(miya|Rita|è¾¾å“¥|ğŸˆ·ï¸)\s*/i, '') };
                if (s.startsWith('ğŸˆ·ï¸')) s = s.replace(/^ğŸˆ·ï¸\s*/, '');
                let teacher = teacherAttr || '';
                for (const t of TEACHER_PREFIXES) {
                    if (s.startsWith(t + ' ') || s.startsWith(t)) {
                        s = s.replace(new RegExp('^' + t.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + '\\s*'), '');
                        break;
                    }
                }
                let type = '';
                for (const ty of TYPES) { if (s.endsWith(ty)) { type = ty; s = s.slice(0, -ty.length); break; } }
                let skill = '';
                for (const sk of SKILLS) { if (s.includes(sk)) { skill = sk; s = s.replace(sk, ''); break; } }
                let test = '';
                for (const te of TESTS) { if (s.includes(te)) { test = te; s = s.replace(te, ''); break; } }
                let student = s.trim();
                return { teacher, student, test, skill, type, special: null };
            }

            function formatTitle(parsed, showTeacher) {
                if (parsed.special !== null && parsed.special !== undefined) return parsed.special;
                let parts = [];
                if (showTeacher && parsed.teacher) parts.push('<span class="ev-teacher">' + parsed.teacher + '</span>');
                if (parsed.student) {
                    if (parts.length) parts.push('<span class="ev-sep">Â·</span>');
                    parts.push('<span class="ev-student">' + parsed.student + '</span>');
                }
                let meta = [parsed.test, parsed.skill].filter(Boolean).join(' ');
                if (parsed.type && parsed.type !== 'æ­£è¯¾') meta += ' ' + parsed.type;
                if (meta) {
                    if (parts.length) parts.push('<span class="ev-sep">Â·</span>');
                    parts.push('<span class="ev-meta">' + meta + '</span>');
                }
                return parts.join('');
            }

            // â”€â”€ Parse all events on page load â”€â”€
            let currentFilter = 'all';
            document.querySelectorAll('.ev').forEach(ev => {
                const raw = ev.querySelector('.ev-title')?.textContent || '';
                const teacherAttr = ev.dataset.teacher || '';
                const parsed = parseTitle(raw, teacherAttr);
                ev._parsed = parsed;
                ev._rawTitle = raw;
                ev.dataset.origLeft = ev.style.left;
                ev.dataset.origWidth = ev.style.width;
                ev.querySelector('.ev-title').innerHTML = formatTitle(parsed, true);
            });

            // Also parse sidebar titles
            document.querySelectorAll('.sidebar-title').forEach(st => {
                const raw = st.textContent || '';
                const parsed = parseTitle(raw, '');
                st._parsed = parsed;
                st._rawTitle = raw;
                st.innerHTML = formatTitle(parsed, true);
            });

            // â”€â”€ 3. Build tomorrow sidebar â”€â”€
            const tomorrowCol = document.querySelector('.day-col[data-date="' + tomorrowStr + '"]');
            if (tomorrowCol) {
                const sidebar = document.querySelector('.sidebar');
                if (sidebar) {
                    // Add divider
                    const divider = document.createElement('div');
                    divider.className = 'sidebar-divider';
                    sidebar.appendChild(divider);

                    // Title
                    const title = document.createElement('div');
                    title.className = 'sidebar-title-main';
                    title.textContent = 'æ˜æ—¥è¯¾ç¨‹æ€»è§ˆ';
                    sidebar.appendChild(title);

                    // Gather tomorrow's events by teacher
                    const tEvs = Array.from(tomorrowCol.querySelectorAll('.ev'));
                    const byTeacher = {};
                    tEvs.forEach(ev => {
                        const t = ev.dataset.teacher || 'å…¶ä»–';
                        if (!byTeacher[t]) byTeacher[t] = [];
                        byTeacher[t].push(ev);
                    });

                    const teacherOrder = ['Miya', 'Rita', 'æœˆæœˆ', 'è¾¾å“¥'];
                    teacherOrder.forEach(tName => {
                        const evList = byTeacher[tName];
                        if (!evList || !evList.length) return;
                        const block = document.createElement('div');
                        block.className = 'sidebar-teacher';
                        const color = TEACHER_COLORS[tName] || '#888';
                        const nameEl = document.createElement('div');
                        nameEl.className = 'sidebar-teacher-name';
                        nameEl.style.color = color;
                        nameEl.innerHTML = '<span class="dot" style="background:' + color + '"></span>' + tName + ' (' + evList.length + 'èŠ‚)';
                        block.appendChild(nameEl);

                        evList.forEach(ev => {
                            const time = ev.querySelector('.ev-time')?.textContent || '';
                            const parsed = ev._parsed;
                            const evEl = document.createElement('div');
                            evEl.className = 'sidebar-ev';
                            evEl.innerHTML = '<span class="sidebar-time">' + time + '</span><span class="sidebar-title">' + formatTitle(parsed, false) + '</span>';
                            block.appendChild(evEl);
                        });
                        sidebar.appendChild(block);
                    });

                    if (tEvs.length === 0) {
                        const empty = document.createElement('div');
                        empty.className = 'sidebar-empty';
                        empty.textContent = 'æ˜æ—¥æš‚æ— è¯¾ç¨‹';
                        sidebar.appendChild(empty);
                    }
                }
            }

            // â”€â”€ Collision recalc â”€â”€
            function recalcColumn(col, filter) {
                const evs = Array.from(col.querySelectorAll('.ev'));
                if (filter === 'all') {
                    evs.forEach(ev => { ev.style.left = ev.dataset.origLeft; ev.style.width = ev.dataset.origWidth; });
                    return;
                }
                const visible = evs.filter(ev => !ev.classList.contains('hidden'));
                if (!visible.length) return;
                const items = visible.map(ev => ({ el: ev, top: parseFloat(ev.style.top), height: parseFloat(ev.style.height) }));
                items.sort((a, b) => a.top - b.top || a.height - b.height);
                const columns = [];
                items.forEach(item => {
                    let placed = false;
                    for (let c = 0; c < columns.length; c++) {
                        const last = columns[c][columns[c].length - 1];
                        if (item.top >= last.top + last.height) { columns[c].push(item); item.col = c; placed = true; break; }
                    }
                    if (!placed) { item.col = columns.length; columns.push([item]); }
                });
                const numCols = columns.length;
                items.forEach(item => {
                    const pct = 100 / numCols;
                    item.el.style.left = 'calc(' + (item.col * pct) + '% + 2px)';
                    item.el.style.width = 'calc(' + pct + '% - 4px)';
                });
            }

            function updateTitles(filter) {
                const showTeacher = (filter === 'all');
                document.querySelectorAll('.ev').forEach(ev => {
                    if (ev._parsed) ev.querySelector('.ev-title').innerHTML = formatTitle(ev._parsed, showTeacher);
                });
            }

            // â”€â”€ Teacher filter â”€â”€
            document.getElementById('tabs').addEventListener('click', e => {
                const btn = e.target.closest('.tab');
                if (!btn) return;
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                btn.classList.add('active');
                const filter = btn.dataset.filter;
                currentFilter = filter;
                document.querySelectorAll('.ev').forEach(el => el.classList.toggle('hidden', filter !== 'all' && el.dataset.teacher !== filter));
                document.querySelectorAll('.allday-pill').forEach(el => el.classList.toggle('hidden', filter !== 'all' && el.dataset.teacher !== filter));
                document.querySelectorAll('.day-col:not(.col-hidden)').forEach(col => recalcColumn(col, filter));
                updateTitles(filter);
            });

            // â”€â”€ Now line â”€â”€
            (function () {
                const col = document.querySelector('.day-col[data-date="' + todayStr + '"]');
                if (!col) return;
                const body = col.querySelector('.day-body');
                const h = now.getHours() + now.getMinutes() / 60;
                if (h < START_HOUR || h > gridEndHour) return;
                const top = (h - START_HOUR) * 60;
                const line = document.createElement('div');
                line.className = 'now-line';
                line.style.top = top + 'px';
                body.appendChild(line);
                const area = document.querySelector('.calendar-area');
                if (area) area.scrollTop = Math.max(0, top - 120);
            })();
        })();
    </script>
</body>

</html>